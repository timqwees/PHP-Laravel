<html lang="ru">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PROДетали -
    <?php
    echo $currentUser['username'];
    ?>
  </title>
  <link rel="stylesheet" href="/src/css/normalize.css" />
  <link rel="stylesheet" href="/src/css/style.css" />
  <link rel="stylesheet" href="/src/css/parts/header.css" />
  <link rel="stylesheet" href="/src/css/parts/footer.css" />
  <link rel="stylesheet" href="/src/css/parts/history.css" />
  <link rel="stylesheet" href="/src/css/pages/constractorPA.css" />
  <link rel="stylesheet" href="/src/css/pages/constractorPA_tablet.css" />
  <link rel="stylesheet" href="/src/css/parts/services_container.css" />
  <link href="https://myfonts.ru/myfonts?fonts=bookman-old-style" rel="stylesheet" type="text/css" />
  <script src="/src/js/contractorAP.js" defer></script>
  <meta charset="UTF-8">
</head>

<body>
  <header>
    <div class="header__container">
      <a class="header__content-left" href="index.php">
        <img class="header__logo" src="../public/logo_and_text.svg" alt="Main logo here" />
      </a>
      <div class="header__content-right">
        <nav class="header__navigation navigation">
          <ul class="navigation__list">
            <li class="navigation__item">
              <a class="navigation__link" href="../ads.php">Объявления
              </a>
            </li>
            <li class="navigation__item">
              <a class="navigation__link" href="../contractors.php">Исполнители</a>
            </li>
            <li class="navigation__item">
              <a class="navigation__link" href="../services.php">Услуги</a>
            </li>
            <li class="navigation__item">
              <a class="navigation__link" href="../aboutUs.php">О нас</a>
            </li>
            <li class="navigation__item">
              <a class="navigation__link" href="../chat.php">Чат</a>
            </li>
          </ul>
        </nav>
        <?php
        if (isset($currentUser['id'])) {
          echo '<a href="../contractorPA.php" class="link_to_profile">
          <img class="header__icon" src="../public/icon_profile.svg" alt="' . $currentUser['username'] . '" />
        </a>';
        } else {
          echo '<a href="../log-in.php" class="link_to_profile">
          <img class="header__icon" src="../public/icon_profile.svg" alt="Profile" />
        </a>';
          // во время разработки href="/_next/regist/log-in.php" в else будет href="/_next/regist/contractorPA.php"
        }
        ?>
      </div>
    </div>
  </header>
  <!-- TODO change on selected -->
  <section class="history">
    <p class="history__text history__links"><a href="../index.php">Главная</a> >> Личный кабинет</p>
    <p class="history__text history__location">Местоположение: Москва</p>
  </section>
  <div class="main__wrapper">
    <aside class="main__navigation">
      <ul class="main__navigation-list">
        <li class="main__navigation-item">
          <button class="main__navigation-button button-profile">
            Профиль
          </button>
        </li>
        <li class="main__navigation-item">
          <button class="main__navigation-button button-services">
            Услуги
          </button>
        </li>
        <li class="main__navigation-item">
          <button class="main__navigation-button button-requests">
            Заказы
          </button>
        </li>
        <li class="main__navigation-item main__navigation-item-exit">
          <form action="../logout.php" method="POST">
            <input type="hidden" name="exit">
            <button class="main__navigation-button button-exit">Выйти</button>
          </form>
        </li>
      </ul>
    </aside>

    <style>
      /* перебиваем каскадом */
      .main__navigation {
        background-color: lightgray;
      }

      .main__navigation-button {
        font-size: calc(1rem + 1vw);
        display: flex;
        padding: 1rem 2rem;
        background: var(--blue-accent);
        justify-content: center;
        color: white;
        align-items: center;
        align-content: center;
        flex-direction: row;
      }

      .profile__image {
        mix-blend-mode: darken;
        max-width: 18rem;
        object-fit: cover;
        object-position: center;
      }

      .profile__content-left {
        max-width: none;
        margin: 0;
        overflow: hidden;
        position: initial;
        padding: 0;
      }

      .profile__form {
        display: block;
        margin: 0;
        justify-content: none;
      }

      .profile__container {
        gap: inherit;
        width: 100%;
        display: flex;
        flex-direction: row;
        margin: 0;
        justify-content: space-between;
        align-items: flex-start;
      }

      .profile__form {
        max-width: 100%;
      }

      .ct-relative {
        position: relative;
      }
    </style>


    <main style="display: flex;flex-direction: column;gap: 20px;width: 100%;margin: 2rem;">
      <section class="profile">
        <form action="contractorPA.php" class="profile__form" method="POST" enctype="multipart/form-data">
          <div class="profile__wrapper">
            <div class="profile__container">
              <div class="ct-relative">
                <div class="profile__content-left">
                  <img height="250px" width="250px"
                    src="../public/<?php echo $currentUser['avatar'] ?? 'default_logo.png'; ?>" alt=""
                    class="profile__image" />
                  <div class="profile__image-upload">
                    <input type="file" name="avatar" id="avatar-upload" accept="image/*" style="display: none;">
                    <label for="avatar-upload" class="profile__image-upload-clip-wrapper">
                      <img src="../public/logo_add_clip-button.svg" alt="logo_upload"
                        class="profile__image-upload-clip">
                    </label>
                  </div>
                  <style>
                    .profile__image-upload {
                      margin-top: 10px;
                    }

                    .profile__image-upload-clip-wrapper {
                      cursor: pointer;
                      display: inline-block;
                    }

                    .profile__image-upload-clip:hover {
                      opacity: 0.8;
                    }
                  </style>
                </div>
              </div>
              <div class="profile__content-right" style="display: flex;flex-direction: column;gap: 20px;">
                <div class="alert alert-error"
                  style="display: <?php echo isset($_SESSION['error']) ? 'block' : 'none'; ?>">
                  <?php
             if (isset($_SESSION['error'])) {
             echo $_SESSION['error'];
             unset($_SESSION['error']);
             }
             ?>
                </div>

                <div class="alert alert-success"
                  style="display: <?php echo isset($_SESSION['success']) ? 'block' : 'none'; ?>">
                  <?php
             if (isset($_SESSION['success'])) {
             echo $_SESSION['success'];
             unset($_SESSION['success']);
             }
             ?>
                </div>
                <input name="username" placeholder="Иванов Иван Иванович" type="text" class="profile__input"
                  value="<?php echo $currentUser['username']; ?>" />
                <input name="phone" placeholder="+7 (999) 999-99-99" type="tel" class="profile__input"
                  value="<?php echo $currentUser['phone'] ?? ''; ?>" />
                <input name="mail" placeholder="name@gmail.com" type="email" class="profile__input"
                  value="<?php echo $currentUser['mail'] ?? ''; ?>" />
                <input name="company" placeholder='ООО "Металлюга"' type="text" class="profile__input"
                  value="<?php echo $currentUser['company'] ?? ''; ?>" />
                <input type="hidden" name="profile__form">
                <p class="profile__text">— поле для обязательного заполнения</p>
                <button class="profile__button button--orange">Сохранить изменения</button>
              </div>
            </div>
          </div>
        </form>
      </section>
      <section class="services">
        <style>
          .services__wrapper {
            display: flex;
            justify-content: center;
            flex-direction: row;
            gap: 2rem;
            margin: 2rem;
            width: 100%;
            flex-wrap: wrap;
            align-items: center;
          }

          .container__card {
            display: flex;
            flex-direction: row-reverse;
            width: 45rem;
            height: 23rem;
            border-radius: 4rem;
            overflow: hidden;
            box-shadow: 0 0.4rem 0.8rem rgba(0, 0, 0, 0.1);
            justify-content: space-around;
            align-content: space-around;
            flex-wrap: wrap;
          }

          .create_article {
            width: 100%;
            height: 100%;
            padding: 10px;
            border-radius: 4rem;
            border: 1px solid #000;
          }

          .create_article:focus {
            outline: none;
            border: 1px solid #1283df;
          }

          .create_article:hover {
            border: 1px solid #000;
          }

          .conetnt {
            display: flex;
            gap: 20px;
            font-size: 1.5rem;
            margin: 0;
            padding: 0;
          }
        </style>
        <div class="services__wrapper">
          <form action="contractorPA.php" method="POST"
            style="display: flex;gap: 20px;width: 100%;justify-content: space-between;align-items: center;">
            <div class="conetnt">
              <input type="hidden" name="create_article">
              <input type="text" name="title" placeholder="Название услуги" class="create_article">
              <input type="text" name="description" placeholder="Описание услуги" class="create_article">
            </div>
            <button class="services__button button--orange" style="margin: 0;">Добавить услугу</button>
          </form>
          <div class="services__container container">
            <?php
          foreach ($listMyArticle as $article) {
            echo '<div class="container__card">';
            echo '<pre>Массив данных поста - ';
            print_r($article);
            echo '</pre>';
            echo '<br>';
            echo '<div class="container__card">';
            echo '<img src="../public/laser.png" alt="Лазерная резка">';
            echo '<div class="container__content">';
            echo '<h3>' . $article['title'] . '</h3>';
            echo '<p>' . $article['content'] . '</p>';
            echo '<p>Создан: ' . $article['created_at'] . '</p>';
            echo '</div>';
            echo '</div>';
            echo '</div>';
          }
          ?>
            <!-- <div class="services__container container">
            <div class="container__card">
              <img src="../public/laser.png" alt="Лазерная резка">
              <div class="container__content">
                <h3>Лазерная резка металла</h3>
                <p>В нашем парке оборудования 3 станка лазерной резки листового металла и станок лазерной резки труб
                </p>
              </div>
            </div>
            <div class="container__card">
              <img src="../public/welding.png" alt="Сварка металла">
              <div class="container__content">
                <h3>Сварка металла</h3>
                <p>Ручная электродуговая, полуавтоматом и сварка аргоном</p>
              </div>
            </div>
            <div class="container__card">
              <img src="../public/laser.png" alt="Лазерная резка">
              <div class="container__content">
                <h3>Лазерная резка металла</h3>
                <p>В нашем парке оборудования 3 станка лазерной резки листового металла и станок лазерной резки труб
                </p>
              </div>
            </div>
            <div class="container__card">
              <img src="../public/welding.png" alt="Сварка металла">
              <div class="container__content">
                <h3>Сварка металла</h3>
                <p>Ручная электродуговая, полуавтоматом и сварка аргоном</p>
              </div>
            </div>
            <div class="container__card">
              <img src="../public/laser.png" alt="Лазерная резка">
              <div class="container__content">
                <h3>Лазерная резка металла</h3>
                <p>В нашем парке оборудования 3 станка лазерной резки листового металла и станок лазерной резки труб
                </p>
              </div>
            </div>
            <div class="container__card">
              <img src="../public/welding.png" alt="Сварка металла">
              <div class="container__content">
                <h3>Сварка металла</h3>
                <p>Ручная электродуговая, полуавтоматом и сварка аргоном</p>
              </div>
            </div>
          </div> -->
          </div>
      </section>
      <section class="requests">
        <div class="requests__container">
          <div class="requests__content-upper">
            <button class="requests__button">Актуальные</button><button class="requests__button">Архив</button>
          </div>
          <div class="requests__content-bottom">
            <div class="requests__block">
              <h3 class="requests__title-block">Лазерная резка металла</h3>
              <p class="requests__description">
                Необходимо изготовить 4 детали по чертежам в соответствии с
                тз......
              </p>
            </div>
            <div class="requests__block">
              <h3 class="requests__title-block">Сварка металла</h3>
              <p class="requests__description">Описание...</p>
            </div>
            <div class="requests__block">
              <h3 class="requests__title-block">Лазерная резка металла</h3>
              <p class="requests__description">Описание...</p>
            </div>
          </div>
        </div>
      </section>
  </div>
  </mainы>
  <footer>
    <div class="footer__wrapper">
      <div class="footer__block">
        <img src="../public/logo_and_text__footer.svg" alt="" class="footer__logo" />
      </div>
      <div class="footer__block">
        <h3 class="footer__block-title">Компания</h3>
        <ul class="footer__block-list">
          <li class="footer__block-item">
            <p class="footer__block-text">О нас</p>
          </li>
          <li class="footer__block-item">
            <p class="footer__block-text">Отзывы</p>
          </li>
          <li class="footer__block-item">
            <p class="footer__block-text">Контакты</p>
          </li>
        </ul>
      </div>
      <div class="footer__block">
        <h3 class="footer__block-title">Документы</h3>

        <ul class="footer__block-list">
          <li class="footer__block-item">
            <p class="footer__block-text">Пользовательское соглашение</p>
          </li>
          <li class="footer__block-item">
            <p class="footer__block-text">Политика конфиденциальности</p>
          </li>
        </ul>
      </div>
      <div class="footer__block">
        <a href="tel:+79999999999" class="footer__link_tel">+7 999 999 99 99</a>
        <a href="mailto:name@gmail.com" class="footer__link_email">name@gmail.com</a>
      </div>
    </div>
    <div class="footer__line"></div>
    <p class="footer__extra">
      Сервис "PRO Детали" - Металлообработка - это важный процесс, который
      играет ключевую роль в промышленности. Она включает в себя различные
      методы обработки металла, такие как резка, сварка, шлифовка и гибка.
      Металлообработка необходима для создания разнообразных изделий - от
      мелких деталей до крупных конструкций.Этот процесс требует высокой
      точности и технического мастерства, чтобы обеспечить качество и
      надежность конечного продукта. В статье мы рассмотрим основные методы
      металлообработки, их применение в различных отраслях промышленности, а
      также новейшие технологии и тенденции в этой области.
    </p>
  </footer>
  <script defer type="module">
    document.getElementById('avatar-upload').addEventListener('change', function (e) {
      if (e.target.files && e.target.files[0]) {
        const reader = new FileReader();
        reader.onload = function (e) {
          document.querySelector('.profile__image').src = e.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);
      }
    });
  </script>
</body>

</html>